# 키친포스

## 요구 사항

## 용어 사전

| 한글명 | 영문명 | 설명 |
| --- | --- | --- |
| 상품 | product | 메뉴를 관리하는 기준이 되는 데이터 |
| 메뉴 그룹 | menu group | 메뉴 묶음, 분류 |
| 메뉴 | menu | 메뉴 그룹에 속하는 실제 주문 가능 단위 |
| 메뉴 상품 | menu product | 메뉴에 속하는 수량이 있는 상품 |
| 금액 | amount | 가격 * 수량 |
| 주문 테이블 | order table | 매장에서 주문이 발생하는 영역 |
| 빈 테이블 | empty table | 주문을 등록할 수 없는 주문 테이블 |
| 주문 | order | 매장에서 발생하는 주문 |
| 주문 상태 | order status | 주문은 조리 ➜ 식사 ➜ 계산 완료 순서로 진행된다. |
| 방문한 손님 수 | number of guests | 필수 사항은 아니며 주문은 0명으로 등록할 수 있다. |
| 단체 지정 | table group | 통합 계산을 위해 개별 주문 테이블을 그룹화하는 기능 |
| 주문 항목 | order line item | 주문에 속하는 수량이 있는 메뉴 |
| 매장 식사 | eat in | 포장하지 않고 매장에서 식사하는 것 |



## 테이블(용어) 설명

* orders (주문)

|id|order_table_id|order_status|order_time|
|------|---|---|---|
|식별자|주문테이블id|주문상태|주문시간|

* order_line_item (주문 라인)

|seq|order_id|menu_id|quantity|
|------|---|---|---|
|순번|주문id|메뉴id|주문수량|

* menu (메뉴)

|seq|name|price|menu_group_id|
|------|---|---|---|
|순번|이름|가격|메뉴그룹id|

* menu_group (메뉴 그룹)

|id|name|
|------|---|
|식별자|이름|

* menu_product (메뉴_상품)

|seq|menu_id|product_id|quantity|
|------|---|---|---|
|순번|메뉴id|상품id|메뉴상품수량|

* order_table (주문 테이블)

|id|menu_id|product_id|quantity|
|------|---|---|---|
|식별자|메뉴id|상품id|메뉴상품수량|

* table_group (테이블 그룹)

|id|created_date|
|------|---|
|식별자|생성날짜시간|

* product (상품)

|id|name|price|
|------|---|---|
|식별자|이름|가격|

## 요구 사항 명세

* 사용자는 메뉴 그룹을 생성 할 수 있다.
  

* 사용자는 메뉴를 만들 수 있다.
    1. 메뉴 가격이 음수 일 수 없다.
    2. 메뉴는 메뉴 그룹에 반드시 포함 되어야 한다.
    3. 메뉴의 상품은 반드시 존재해야 한다.
    4. 상품들의 수량과 가격으로 전체 가격 합계를 구한다.
    

* 사용자는 주문을 생성 할 수 있다.
    1. 요청으로 받은 주문 라인은 주문id와 메뉴id를 가지고 있어야 한다.
    2. 주문 라인의 메뉴id를 통하여 메뉴를 불러온다. (하나의 주문 라인은 1개의 메뉴를 모두 가지고 있어야 한다. 사이즈 체크 필요)
    3. 주문 테이블id를 통해 주문테이블 데이터를 가져온다.
    4. 주문 테이블이 비어 있는지 체크한다.
    5. 주문의 주문 테이블 번호를 셋팅한다.
    6. 주문 상태를 Cooking으로 바꾼다.
    7. 주문 라인에 주문 데이터를 저장한다.
    

* 사용자는 상품을 생성할 수 있다.
    1. 요청의 상품 가격이 비어있지 않은지 0보다 낮은 가격인지 체크
    

* 사용자는 단체지정을 만들 수 있다.
    1. 단체지정의 주문테이블을 요청으로 받는다.
    2. 주문테이블의 요청 id의 개수가 2보다 작은지 체크한다.
    3. 주문테이블의 id를 불러온다. 이 때 요청 받은 주문테이블의 데이터가 모두 있는지 체크한다.
    4. 단체지정의 생성시간을 셋팅하고 저장한한다.
    5. 저장시 empty란을 false로 저장한다.
    

* 사용자는 단체지정을 취소 할 수 있다.
    1. 테이블 그룹을 조회한다.
    2. 조회 시 주문 상태가 Cooking, Meal 상태가아닌지 체크한다.
    3. 주문테이블의 id를 null로 셋팅하여 취소를 저장한다.
    

* 사용자는 테이블을 생성(예약) 할 수 있다.
  

* 사용자는 테이블을 빈 테이블(empty)로 셋팅 할 수 있다.
    1. 테이블을 조회하여 데이터가 있는지 체크한다.
    2. 테이블의 주문 상태가 Cooking, Meal 상태가 아닌지 체크한다.
    3. 테이블의 empty를 true로 저장한다.
    

* 사용자는 게스트의 숫자를 변경 할 수 있다.
    1. 게스트의 숫가자 음수인지 체크한다.
    2. 주문테이블id를 통하여 데이터가 있는지 체크한다.
    3. 게스트의 숫자를 변경하고 저장한다.